<template>
  <section
    role="dialog"
    tabindex="-1"
    aria-labelledby="modal-heading-01"
    aria-modal="true"
    aria-describedby="modal-content-id-1"
    class="slds-modal slds-fade-in-open modal"
  >
    <div class="modal-container">
      <div class="slds-modal__content" id="modal-content-id-1">
        <template lwc:if={beforeScheduling}>
          <lightning-layout
            horizontal-align="left"
            class="modal-title-container"
          >
            <lightning-layout-item alignment-bump="left">
              <div class="acceptNewAptTitle">{mainTitle}</div>
            </lightning-layout-item>
            <lightning-layout-item alignment-bump="left">
              <div class="acceptNewAptClose">
                <lightning-icon
                  class="changeIconColor"
                  icon-name="utility:close"
                  size="x-small"
                  title="Close"
                  onclick={handleCloseModal}
                  aria-label="Close"
                >
                </lightning-icon>
              </div>
            </lightning-layout-item>
          </lightning-layout>
          <template lwc:if={showSpinner}>
            <div>
              <div class="local-spinner-container">
                <lightning-spinner
                  alternativetext="Loading"
                  variant="brand"
                  size="medium"
                >
                </lightning-spinner>
              </div>
            </div>
          </template>
          <template lwc:else>
            <div>
              <div class="info">
                <div class="info-emph">{workTypeName}</div>
                <div class="info-date">{newAppointmentDate}</div>
                <div class="secondary-title">{contactName}</div>
                <div class="secondary-title">{assignToName}</div>
              </div>

              <div class="modal-footer">
                <button
                  title={rescheduleBtnTitle}
                  onclick={handleConfirm}
                  class="slds-button slds-button_brand confirmBtn"
                  label={rescheduleBtnTitle}
                >
                  {rescheduleBtnTitle}
                </button>
              </div>
            </div>
          </template>
        </template>
        <template lwc:else>
          <lightning-layout
            horizontal-align="left"
            class="modal-title-container"
          >
            <lightning-layout-item alignment-bump="left">
              <div class="acceptNewAptTitle hide">{mainTitle}</div>
            </lightning-layout-item>
            <lightning-layout-item alignment-bump="left">
              <div class="acceptNewAptClose hide">
                <lightning-icon
                  class="changeIconcolor"
                  icon-name="utility:close"
                  size="x-small"
                  title="Close"
                  onclick={handleCloseModal}
                  aria-label="Close"
                >
                </lightning-icon>
              </div>
            </lightning-layout-item>
          </lightning-layout>
          <template lwc:if={scheduleSuccess}>
            <section>
              <div class="schedule-results-header-icon-container top-space">
                <lightning-icon
                  icon-name="utility:success"
                  alternative-text="Success"
                  variant="success"
                  size="small"
                  aria-label="Success"
                  title="Success"
                >
                </lightning-icon>
                <div class="schedule-results-header-icon-title">
                  {successTitle}
                </div>
              </div>
              <div class="info">
                <div class="info-emph">{workTypeName}</div>
                <div class="info-date">{newAppointmentDate}</div>
                <div class="secondary-title">{newRecordNumber}</div>
                <div class="contact-name-title">{contactName}</div>
                <div class="secondary-title">{assignToName}</div>
              </div>
            </section>
            <div class="modal-footer">
              <button
                title={confirmAndCloseBtn}
                onclick={handleConfirmBtnClose}
                class="slds-button slds-button_brand confirmBtn"
                label={confirmAndCloseBtn}
              >
                {confirmAndCloseBtn}
              </button>
            </div>
          </template>
          <template lwc:else>
            <div class="scheduling-results-container">
              <div class="schedule-results-header-icon-container">
                <lightning-icon
                  icon-name="utility:error"
                  alternative-text="Error"
                  variant="error"
                  size="small"
                  aria-label="Error"
                  title="Error"
                >
                </lightning-icon>
                <div class="schedule-results-header-icon-title">
                  {failureTitle}
                </div>
              </div>
              <div class="scheduling-results-info">{failurBody}</div>
            </div>
            <div class="modal-footer">
              <button
                title={confirmAndCloseBtn}
                onclick={handleCloseModal}
                class="slds-button slds-button_brand confirmBtn"
                label={confirmAndCloseBtn}
              >
                {confirmAndCloseBtn}
              </button>
            </div>
          </template>
        </template>
      </div>
    </div>
  </section>
  <div class="slds-backdrop slds-backdrop_open"></div>
</template>
